---
- name: "ğŸš€ Starting full stack deployment"
  debug:
    msg: "Deploying stack '{{ stack_name }}' in '{{ environment }}' environment"

- name: "ğŸ“¦ Phase 1: Database deployment"
  include_role:
    name: database
  when: deploy_database | default(true)

- name: "ğŸŒ Phase 2: Web server deployment"
  include_role:
    name: web
  when: deploy_web | default(true)

- name: "ğŸš€ Phase 3: Application deployment"
  include_role:
    name: app
  when: deploy_app | default(true)

- name: "âœ… Phase 4: Verification"
  debug:
    msg: |
      Stack deployment completed!
      Components deployed:
      - Database: {{ deploy_database | ternary('âœ“', 'âœ—') }}
      - Web: {{ deploy_web | ternary('âœ“', 'âœ—') }}
      - App: {{ deploy_app | ternary('âœ“', 'âœ—') }}
